{"version":3,"file":"main.js","names":["WOW","init","document","addEventListener","path","sections","querySelectorAll","mainBlock","querySelector","videos","turnSounds","lastSection","lastVideoSection","header","copyCodeButton","body","mobilePosters","isSafari","test","navigator","userAgent","window","isDownScroll","currentIndex","body_lock","isScroling","classList","add","isMobile","changeVideoForMobile","changeMobilePosters","video_btns_safari_1","video_btns_safari_2","forEach","bottom_video_btn","location","href","showHeader","play","setSectionState","firstVideo","e","setAttribute","firstVideoBlock","currentTime","hideCopyCodeButton","nextSlide","remove","copyCode","jsCode","clipboard","writeText","isHide","index","length","video","src","includes","concat","mobilePoster","poster","getAttribute","turn","getSectionState","img","muted","_loop","stopAllVideo","nextIndex","safePlayVideo","Index","currentVideo","isPlaying","pause","section","scrollByElementName","previousSlide","arguments","undefined","scrollToVideo","removeEventListener","elementName","element","scrollToValue","offsetTop","scrollToOffset","offset","scrollTo","behavior","left","top","viewportOffsetLastSection","Math","abs","getBoundingClientRect","bottom","offsetHeight","scrollY","viewportOffsetLastVideo","viewedPageHeight","innerHeight","style","overflowY","main","website","mobileApplication","work","viewportOffsetMain","viewportOffsetWebsite","viewportOffMobileAppication","viewportOffWork","cleanHoverMenu","menuItems","setTimeout","isShow","eventTouch","position","touches","pageY","event","screenY","delayWheel","deltaY","state","slider","Swiper","speed","spaceBetween","centeredSlides","preventInteractionOnTransition","autoplay","delay","disableOnInteraction","breakpoints","slidesPerView","on","_this","stop","el","start"],"sources":["main.js"],"sourcesContent":["new WOW().init();\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    init();\n});\nvar path = \"./\";\nconst sections = document.querySelectorAll(\"[section]\");\nconst mainBlock = document.querySelector(\"#main\");\nconst videos = document.querySelectorAll('[video]');\nconst turnSounds = document.querySelectorAll('[turn-sound ]');\nconst lastSection = document.querySelector(`[section=\"video3\"]`);\nconst lastVideoSection = document.querySelector(`[section=\"video3\"]`);\nconst header = document.querySelector(\"#header\");\nconst copyCodeButton = document.querySelector(\"[copyCode]\");\nconst body = document.querySelector(\".main_body_section\");\nconst mobilePosters = document.querySelectorAll(\"[poster_mobile]\");\n\nfunction isSafari() {\n    var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    return isSafari;\n}\n\nfunction init() {\n    window.isDownScroll = false;\n    window.currentIndex = null;\n    window.body_lock = false;\n    window.isScroling = false;\n\n    header.classList.add(\"header_transparent\");\n\n    if (isMobile()) {\n        changeVideoForMobile();\n        changeMobilePosters();\n    }\n\n    if (isMobile() && isSafari()) {\n        const video_btns_safari_1 = document.querySelectorAll(\".video_btn_safari_1\");\n        const video_btns_safari_2 = document.querySelectorAll(\".video_btn_safari_2\");\n        video_btns_safari_1.forEach((bottom_video_btn) => {\n            bottom_video_btn.classList.add(\"safari_button_1\");\n        });\n\n        video_btns_safari_2.forEach((bottom_video_btn) => {\n            bottom_video_btn.classList.add(\"safari_button_2\");\n        });\n    }\n\n    if (/phone_video/.test(location.href)) {\n        showHeader(true);\n        videos[2].play();\n        setSectionState(2);\n    } else if (/desktop_video/.test(location.href)) {\n        showHeader(true);\n        videos[1].play()\n        setSectionState(1);\n    }\n\n    let firstVideo = videos[0];\n\n    firstVideo.addEventListener(\"error\", function (e) {\n        if(isMobile()){\n            firstVideo.setAttribute('poster', 'images/main_page/video_img_mobile_1.png')\n        }else{\n            firstVideo.setAttribute('poster', 'images/main_page/video_img_1.png')  \n        }\n    });\n\n    firstVideo.addEventListener('timeupdate', function () {\n        let firstVideoBlock = document.querySelector(\"[section=\\\"video1\\\"]\");\n        if (firstVideo.currentTime >= 3.50000) {\n            hideCopyCodeButton(true);\n        }\n\n        if (firstVideo.currentTime >= 15.00000) {\n            firstVideoBlock.classList.add(\"video-opacity\");\n            showHeader(true);\n        }\n\n        if (firstVideo.currentTime >= 15.80000) {\n            nextSlide();\n            firstVideoBlock.classList.remove(\"video-opacity\");\n        }\n    }, false);\n}\n\nwindow.addEventListener('resize', function () {\n    if (isMobile()) {\n        changeVideoForMobile();\n    }\n}, true);\n\nfunction copyCode() {\n    var jsCode = `<!DOCTYPE html>\n    <head><title></title></head>\n    <body>\n    <svg id=\"mySvg\" width=\"960\" height=\"500\"></svg>\n    <script src=\"http://d3js.org/d3.v7.min.js\"></script>\n    <script src=\"http://d3js.org/topojson.v3.min.js\"></script>\n    <script>\n    var width = 960, height = 500, svg = d3.select(\"svg\");\n    d3.json(\"https://raw.githubusercontent.com/org-scn-design-studio-\" +\n        \"community/sdkcommunitymaps/master/geojson/Europe/Ukraine-regions.json\"\n    ).then(function (data) {\n        var land = topojson.feature(data, data.objects.UKR_adm1),\n            projection = d3.geoAlbers().rotate([-30, 0, 0])\n                .fitSize([.9 * width, .9 * height], land),\n            path = d3.geoPath().projection(projection);\n        svg.selectAll(\"path\").data(land.features).enter()\n            .append(\"path\").attr(\"d\", path).attr(\"fill\", \"#FFD500')\n            .attr(\"stroke\", \"#005BBB\");\n        svg.append(\"text\").attr(\"x\", (width / 2)).attr(\"y\", height - (20))\n            .attr(\"text-anchor\", \"middle\").style(\"font-size\", \"24px\")\n            .style(\"fill\", \"#005BBB\").text(\"Improvs\");`;\n\n    navigator.clipboard.writeText(jsCode);\n}\n\nfunction hideCopyCodeButton(isHide) {\n    let firstVideo = document.querySelector(\"[section=\\\"video1\\\"]\");\n    if (isHide) {\n        firstVideo.classList.add(\"video_block_full\");\n        copyCodeButton.classList.add(\"hide\");\n    } else {\n        firstVideo.classList.remove(\"video_block_full\");\n        copyCodeButton.classList.remove(\"hide\");\n    }\n}\n\n//video\nfunction changeVideoForMobile() {\n    for (let index = 0; index < videos.length; index++) {\n        const video = videos[index];\n        if (!video.src.includes(\"mobile\")) {\n            video.src = path + `files/main_video/video_${index + 1}_mobile.mp4`;\n            \n        }\n    }\n}\n\nfunction changeMobilePosters(){\n    mobilePosters.forEach((mobilePoster) => {\n        let poster=mobilePoster.getAttribute(\"poster_mobile\");\n        mobilePoster.poster=poster;\n    });\n}\n\nturnSounds.forEach(turn => {\n    turn.addEventListener('click', function () {\n        let video = videos[getSectionState()]\n        let img = turn.querySelector('img');\n        if (video) {\n            video.muted = !video.muted;\n            if (video.muted) {\n                img.src = path + '/images/main_page/sound_switch.svg';\n            } else {\n                img.src = path + '/images/main_page/sound_turn.svg';\n            }\n        }\n    })\n});\n\n\nfor (let index = 0; index < videos.length; index++) {\n    const video = videos[index];\n    video.addEventListener('ended', function (e) {\n        nextSlide();\n        stopAllVideo();\n        let nextIndex = index + 1;\n        if (videos[nextIndex]) {\n            safePlayVideo(nextIndex);\n        }\n    });\n}\n\nfunction safePlayVideo(Index) {\n    let currentVideo = videos[Index];\n    let isPlaying = currentVideo.currentTime == 0;\n    if (isPlaying) {\n        currentVideo.play();\n    }\n}\n\nfunction stopAllVideo() {\n    videos.forEach(video => {\n        video.currentTime = 0;\n        video.pause();\n    });\n}\n\nfunction nextSlide() {\n    if (window.body_lock) {\n        return;\n    }\n\n    let index = getSectionState();\n    if (index) {\n        if (index <= sections.length - 2) {\n            index = index + 1;\n\n            if (index == 2) {\n                stopAllVideo();\n                safePlayVideo(2);\n            }\n\n            if (index == 3) {\n                stopAllVideo();\n            }\n\n            let section = sections[index].getAttribute('section');\n\n            scrollByElementName(section);\n            setSectionState(index);\n        }\n    } else {\n        showHeader(true);\n        let section = sections[1].getAttribute('section');\n        scrollByElementName(section);\n        stopAllVideo();\n        safePlayVideo(1);\n        setSectionState(1);\n    }\n}\n\nfunction previousSlide(isDownScroll = false) {\n    if (window.body_lock) {\n        return;\n    }\n\n    let index = getSectionState();\n    if (index) {\n        if (index > 0) {\n            index = index - 1;\n\n            if (index <= 2) {\n                stopAllVideo();\n                hideCopyCodeButton(false);\n                safePlayVideo(index);\n            }\n            if (index == 0) {\n                showHeader(false);\n            }\n\n            let section = sections[index].getAttribute('section');\n\n            if (section === \"video3\" && isDownScroll) {\n                function scrollToVideo() {\n                    scrollByElementName(section);\n                    window.removeEventListener('scrollend', scrollToVideo);\n                }\n                window.addEventListener('scrollend', scrollToVideo)\n            }\n\n            if (section == \"video3\" && !isDownScroll) {\n                return;\n            }\n\n            scrollByElementName(section);\n            setSectionState(index);\n        }\n    }\n}\n\n//scroll\nfunction scrollByElementName(elementName) {\n    let element = \"\";\n    element = document.querySelector(`[section=${elementName}]`);\n    if (!element) {\n        return;\n    }\n\n    let scrollToValue = element.offsetTop;\n    scrollToOffset(scrollToValue);\n}\n\nfunction scrollToOffset(offset) {\n    window.scrollTo({\n        behavior: 'smooth',\n        left: 0,\n        top: offset\n    });\n}\n\n//sroll previous\nlet viewportOffsetLastSection = Math.abs(lastSection.getBoundingClientRect().bottom + (lastSection.offsetHeight - 50) + window.scrollY);\nlet viewportOffsetLastVideo = Math.abs(lastVideoSection.getBoundingClientRect().bottom + lastSection.offsetHeight + window.scrollY);\nwindow.addEventListener(\"scroll\", function () {\n    let viewedPageHeight = Math.abs(document.body.getBoundingClientRect().top) + window.innerHeight;\n\n    if (window.body_lock) {\n        return;\n    }\n\n    if (viewedPageHeight >= viewportOffsetLastVideo) {\n        header.classList.remove(\"header_transparent\");\n    } else {\n        header.classList.add(\"header_transparent\");\n    }\n    if (viewedPageHeight <= (viewportOffsetLastSection) && window.isDownScroll) {\n        window.isDownScroll = false;\n        body.style.overflowY = \"hidden\";\n        previousSlide(true);\n    }\n    if (viewedPageHeight >= viewportOffsetLastVideo && !isDownScroll) {\n        body.style.overflowY = \"auto\";\n        window.isDownScroll = true;\n    }\n\n\n    //menu hover\n    let main = document.querySelector(\"[section=\\\"video1\\\"]\");\n    let website = document.querySelector(\"[section=\\\"video2\\\"]\");\n    let mobileApplication = document.querySelector(\"[section=\\\"video3\\\"]\");\n    let work = document.querySelector(\"[section=\\\"work\\\"]\");\n\n    let viewportOffsetMain = Math.abs(main.getBoundingClientRect().top + window.scrollY);\n    let viewportOffsetWebsite = Math.abs(website.getBoundingClientRect().top + window.scrollY);\n    let viewportOffMobileAppication = Math.abs(mobileApplication.getBoundingClientRect().top + window.scrollY);\n    let viewportOffWork = Math.abs(work.getBoundingClientRect().top + window.scrollY);\n\n    if (viewedPageHeight >= viewportOffsetMain && viewedPageHeight <= viewportOffMobileAppication) {\n        cleanHoverMenu();\n        menuItems[1].classList.add(\"menu_active_link\");\n    } else if (viewedPageHeight >= viewportOffsetWebsite && viewedPageHeight < viewportOffWork) {\n        cleanHoverMenu();\n        menuItems[2].classList.add(\"menu_active_link\");\n    } else if (viewedPageHeight >= viewportOffWork) {\n        cleanHoverMenu();\n        menuItems[3].classList.add(\"menu_active_link\");\n    }\n\n    window.isScroling = true;\n    setTimeout(() => window.isScroling = false, 500);\n});\n\n\n//header\nfunction showHeader(isShow) {\n    if (isShow) {\n        header.classList.add(\"active\");\n    } else {\n        header.classList.remove(\"active\");\n    }\n}\n\n//touch\nlet eventTouch = null;\ndocument.addEventListener(\"touchstart\", function (e) {\n    eventTouch = e;\n});\n\ndocument.addEventListener(\"touchmove\", function (e) {\n    if (eventTouch) {\n        let position = (e.touches[0].pageY - eventTouch.touches[0].pageY);\n        eventTouch = null;\n        if (position > 0) {\n            previousSlide();\n        } else {\n            nextSlide();\n        }\n    }\n});\n\ndocument.addEventListener(\"touched\", function (e) {\n    eventTouch = null;\n});\n\n//touch desktop\nvar event = null;\ndocument.addEventListener(\"mousedown\", function (e) {\n    event = e;\n});\n\ndocument.addEventListener(\"mousemove\", function (e) {\n    if (event) {\n        let position = (e.screenY - event.screenY);\n        event = null;\n        if (position > 0) {\n            previousSlide();\n        } else {\n            nextSlide();\n        }\n    }\n});\n\ndocument.addEventListener(\"mouseup\", function (e) {\n    event = null;\n});\n\n//mouse wheel event\nvar delayWheel = true;\ndocument.addEventListener('wheel', function (event) {\n    if (delayWheel === true) {\n        delayWheel = false;\n        if (event.deltaY > 0) {\n            nextSlide();\n        } else {\n            previousSlide();\n        }\n\n        setTimeout(function () {\n            delayWheel = true;\n        }, 1000);\n    }\n});\n\n\n//state\nfunction setSectionState(index) {\n    window.currentIndex = index;\n}\n\nfunction getSectionState() {\n    var state = window.currentIndex;\n    if (state) {\n        return state;\n    } else {\n        return null;\n    }\n}\n\n//OURWORK\nconst slider = new Swiper(\".case_swiper\", {\n    speed: 4500,\n    // loop: true,\n    spaceBetween: 20,\n    // freeMode: true,\n    centeredSlides: false,\n    preventInteractionOnTransition: false,\n    autoplay: {\n        delay: 1,\n        disableOnInteraction: false\n    },\n    breakpoints: {\n        320: {\n            slidesPerView: 1.15,\n            spaceBetween: 10,\n        },\n        480: {\n            slidesPerView: 1.3,\n        },\n        1440: {\n            slidesPerView: 1.5,\n        },\n        1920: {\n            slidesPerView: 2.2,\n        },\n    },\n    on: {\n        init() {\n            this.autoplay.stop();\n\n            this.el.addEventListener('mousemove', () => {\n                if (!window.isScroling) {\n                    this.autoplay.start();\n                }\n            });\n\n            this.el.addEventListener('mouseleave', () => {\n                this.autoplay.stop();\n            });\n        }\n    }\n});"],"mappings":"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"}