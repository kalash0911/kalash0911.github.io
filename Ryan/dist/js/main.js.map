{"version":3,"sources":["main.js"],"names":["window","addEventListener","event","innerWidth","initStickyPhone","startSection","document","querySelector","phonesWrapper","phoneContent","phoneImgs","querySelectorAll","steps","stepsReact","reduce","prev","cur","ind","stepRect","getBoundingClientRect","sectionRect","forEach","img","style","zIndex","phoneWrapDesctination","height","phoneContentHeight","gsap","fromTo","x","rotation","scrollTrigger","trigger","start","end","scrub","pin","onEnter","y","onUpdate","self","filterValue","progress","toFixed","filter","kidsAnimLoadCounter","kidsTotalDuration","kidsAnimation","Array","fill","map","elem","arr","anim","bodymovin","loadAnimation","container","getElementById","path","render","loop","autoplay","length","onComplete","getDuration","intersectionCallback","mPhoneAnimLoadCounter","mPhoneTotalDuration","mobilePhoneAnimation","animArr","el","createObserver","entries","isIntersecting","play","pause","target","callback","options","root","threshold","observer","IntersectionObserver","observe","entry"],"mappings":"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","sourcesContent":["window.addEventListener(\"load\", (event) => {\r\n  if(window.innerWidth >= 1200) {\r\n    initStickyPhone();\r\n  }\r\n});\r\n\r\nfunction initStickyPhone() {\r\n  const startSection = document.querySelector(\".phone-section\");\r\n  const phonesWrapper = startSection.querySelector('.sticky-phones-wrapper');\r\n  const phoneContent = phonesWrapper.querySelector('.sticky-phones-content');\r\n  // const kidsWrapper = startSection.querySelector('.sticky-kids-wrapper');\r\n  // const kidsContent = startSection.querySelector('.sticky-kids-content');\r\n  const phoneImgs = phoneContent.querySelectorAll('img');\r\n  // const kidsElements = kidsContent.querySelectorAll('[id*=kids_anim]');\r\n  const steps = document.querySelectorAll('.steps li');\r\n  const stepsReact = [...steps].reduce((prev, cur, ind) => {\r\n    const stepRect = cur.getBoundingClientRect();\r\n    prev[`${ind}`] = stepRect;\r\n    return prev;\r\n  }, {})\r\n  const sectionRect = startSection.getBoundingClientRect();\r\n  phoneImgs.forEach((img, ind) => img.style.zIndex = `${ind}`);\r\n  // kidsElements.forEach((el, ind) => el.style.zIndex = `${ind}`);\r\n\r\n\r\n  const phoneWrapDesctination = sectionRect.height - stepsReact[0].height;\r\n  const phoneContentHeight = phonesWrapper.getBoundingClientRect().height;\r\n  // phoneContent.style.height = `${phoneContentHeight - 10}px`;\r\n\r\n  // Phone wrapper scroll anim\r\n  gsap.fromTo(\r\n    phonesWrapper,\r\n    {\r\n      x: 5,\r\n      rotation: 3,\r\n      // skewX: -2,\r\n    },\r\n    {\r\n      x: -5,\r\n      rotation: -3,\r\n      // skewX: 2,\r\n      scrollTrigger: {\r\n        trigger: steps[0].querySelector('.title'),\r\n        start: `50% center`,\r\n        end: `${phoneWrapDesctination} center`,\r\n        scrub: 0.5,\r\n        // markers: true,\r\n        pin: phonesWrapper,\r\n        onEnter: () => {\r\n          // kidsAnimation[0].play();\r\n        }\r\n      },\r\n    }\r\n  );\r\n\r\n  //Kids wrapper scroll anim\r\n  // gsap.fromTo(\r\n  //   kidsWrapper,\r\n  //   {\r\n  //     x: 0,\r\n  //   },\r\n  //   {\r\n  //     x: 0,\r\n  //     scrollTrigger: {\r\n  //       trigger: phonesWrapper,\r\n  //       start: `${stepsReact[0].height}-=250px center`,\r\n  //       end: `${phoneWrapDesctination} center`,\r\n  //       scrub: 0.5,\r\n  //       // markers: true,\r\n  //       pin: kidsWrapper,\r\n  //       onEnter: () => {\r\n  //         kidsAnimation[0].play()\r\n  //       }\r\n  //     },\r\n  //   }\r\n  // );\r\n\r\n  // Content images scroll anim\r\n  phoneImgs.forEach((img, ind) => {\r\n    if (ind > 0) {\r\n      gsap.fromTo(\r\n        img,\r\n        {\r\n          x: 0,\r\n          y: -phoneContentHeight,\r\n          rotation: 0,\r\n        },\r\n        {\r\n          x: 0,\r\n          y: 0,\r\n          rotation: 0,\r\n          scrollTrigger: {\r\n            trigger: steps[ind],\r\n            start: `65% 80%-${phoneContentHeight}`,\r\n            end: `bottom+=20% 85%`,\r\n            scrub: 1,\r\n            // markers: true,\r\n            onUpdate: (self) => {\r\n              const filterValue = self.progress.toFixed(3) * 20;\r\n              phoneImgs[ind - 1].style.filter = `blur(${filterValue}px)`;\r\n              // if(self.progress < 0.1) {\r\n              //   kidsAnimation[ind].pause();\r\n              // } else {\r\n              //   if(kidsAnimation[ind].isPaused) {\r\n              //     kidsAnimation[ind].play();\r\n              //   } \r\n              // }\r\n            },\r\n            // onLeave: (self) => {\r\n            //   kidsAnimation[ind].play();\r\n            //   kidsAnimation[ind-1].pause();\r\n            // },\r\n            // onEnterBack: () => {\r\n            //   kidsAnimation[ind-1].play();\r\n            // }\r\n          },\r\n        }\r\n      )\r\n    }\r\n  });\r\n\r\n  // Kids anim scroll sticky\r\n  //  kidsElements.forEach((el, ind) => {\r\n  //   if (ind > 0) {\r\n  //     gsap.fromTo(\r\n  //       el,\r\n  //       {\r\n  //         x: 0,\r\n  //         y: -500,\r\n  //         rotation: 0,\r\n  //       },\r\n  //       {\r\n  //         x: 0,\r\n  //         y: 0,\r\n  //         rotation: 0,\r\n  //         scrollTrigger: {\r\n  //           trigger: steps[ind],\r\n  //           start: `75% 80%-${500}`,\r\n  //           end: `bottom+=10% 85%`,\r\n  //           scrub: 1,\r\n  //           // markers: true,\r\n  //           onUpdate: (self) => {\r\n  //             const filterValue = self.progress.toFixed(3) * 20;\r\n  //             kidsElements[ind - 1].style.filter = `blur(${filterValue}px)`;\r\n  //             kidsElements[ind - 1].style.opacity = `${1 - self.progress}`;\r\n  //             if(self.progress !== 1) {\r\n  //               kidsAnimation[ind].pause();\r\n  //             }\r\n  //           },\r\n  //           onLeave: (self) => {\r\n  //             kidsAnimation[ind].play();\r\n  //           },\r\n  //         },\r\n  //       }\r\n  //     )\r\n  //   }\r\n  // });\r\n}\r\n\r\nlet kidsAnimLoadCounter = 0;\r\nlet kidsTotalDuration = 0;\r\nconst kidsAnimation = new Array(5).fill('kids_anim').map((elem, ind, arr) => {\r\n  const anim = bodymovin.loadAnimation({\r\n    container: document.getElementById(`${elem}_${ind + 1}`),\r\n    path: `./files/anim_${ind + 1}.json`,\r\n    render: \"svg\",\r\n    loop: true,\r\n    autoplay: false,\r\n  });\r\n  anim.addEventListener(\"DOMLoaded\", () => {\r\n    kidsAnimLoadCounter += 1;\r\n    if (kidsAnimLoadCounter === arr.length) {\r\n      kidsTotalDuration = kidsAnimation.reduce((prev, cur, ind) => {\r\n        cur.onComplete = () => {\r\n          // anim complete cb\r\n        };\r\n        return (prev += cur.getDuration());\r\n      }, 0);\r\n      intersectionCallback(kidsAnimation);\r\n    }\r\n  });\r\n  return anim;\r\n});\r\n\r\nlet mPhoneAnimLoadCounter = 0;\r\nlet mPhoneTotalDuration = 0;\r\nconst mobilePhoneAnimation = new Array(5).fill('mob_phone').map((elem, ind, arr) => {\r\n  const anim = bodymovin.loadAnimation({\r\n    container: document.getElementById(`${elem}_${ind + 1}`),\r\n    path: `./files/mob_phone_${ind + 1}.json`,\r\n    render: \"svg\",\r\n    loop: true,\r\n    autoplay: false,\r\n  });\r\n  anim.addEventListener(\"DOMLoaded\", () => {\r\n    mPhoneAnimLoadCounter += 1;\r\n    if (mPhoneAnimLoadCounter === arr.length) {\r\n      mPhoneTotalDuration = mobilePhoneAnimation.reduce((prev, cur, ind) => {\r\n        cur.onComplete = () => {\r\n          // anim complete cb\r\n        };\r\n        return (prev += cur.getDuration());\r\n      }, 0);\r\n      intersectionCallback(mobilePhoneAnimation);\r\n    }\r\n  });\r\n  return anim;\r\n});\r\n\r\nfunction intersectionCallback(animArr) {\r\n  document.querySelectorAll('.steps .item')?.forEach((el, ind) => {\r\n    createObserver(el, (entries) => {\r\n      if(entries[0].isIntersecting) {\r\n        animArr[ind]?.play();\r\n      } else {\r\n        animArr[ind]?.pause();\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nfunction createObserver(target, callback) {\r\n  const options = {\r\n    root: null,\r\n    threshold: 0,\r\n  };\r\n  const observer = new IntersectionObserver(callback, options);\r\n  observer.observe(target);\r\n}\r\n\r\ncreateObserver(document.querySelector('#kids_anim_1'), (entries) => {\r\n  entries.forEach((entry) => {\r\n    if (entry.isIntersecting) {\r\n      kidsAnimation[0].play();\r\n    }\r\n  });\r\n});"],"file":"main.js"}