{"version":3,"sources":["gifffer.js"],"names":["Gifffer","initGiffer","window","document","d","playSize","options","images","i","gifs","querySelectorAll","length","process","formatUnit","v","toString","indexOf","parseStyles","styles","stylesStr","prop","createContainer","w","h","el","altText","opts","alt","con","createElement","cls","getAttribute","id","playButtonStyles","join","playButtonIconStyles","setAttribute","play","trngl","appendChild","innerText","parentNode","replaceChild","insertBefore","nextSibling","c","p","calculatePercentageDim","wOrig","hOrig","parentDimW","offsetWidth","parentDimH","offsetHeight","ratio","parseInt","replace","url","duration","gif","playing","cc","isC","durationTimeout","dims","style","display","getContext","onload","width","height","push","addEventListener","clearTimeout","Math","floor","random","setTimeout","src","removeChild","drawImage"],"mappings":"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","sourcesContent":["var Gifffer;\r\n\r\nfunction initGiffer() {\r\n  // Check if running in client\r\n  if (typeof window === 'undefined' || typeof document === 'undefined') {\r\n    return\r\n  }\r\n  var d = document\r\n  var playSize = 60\r\n\r\n  Gifffer = function(options) {\r\n    var images,\r\n      i = 0,\r\n      gifs = []\r\n\r\n    images = d.querySelectorAll('[data-gifffer]')\r\n    for (; i < images.length; ++i) process(images[i], gifs, options)\r\n    // returns each gif container to be usable programmatically\r\n    return gifs\r\n  }\r\n\r\n  function formatUnit(v) {\r\n    return v + (v.toString().indexOf('%') > 0 ? '' : 'px')\r\n  }\r\n\r\n  function parseStyles(styles) {\r\n    var stylesStr = ''\r\n    for (prop in styles) stylesStr += prop + ':' + styles[prop] + ';'\r\n    return stylesStr\r\n  }\r\n\r\n  function createContainer(w, h, el, altText, opts) {\r\n    var alt\r\n    var con = d.createElement('BUTTON')\r\n    var cls = el.getAttribute('class')\r\n    var id = el.getAttribute('id')\r\n    var playButtonStyles =\r\n      opts && opts.playButtonStyles\r\n        ? parseStyles(opts.playButtonStyles)\r\n        : [\r\n            'width:' + playSize + 'px',\r\n            'height:' + playSize + 'px',\r\n            'border-radius:' + playSize / 2 + 'px',\r\n            'background:rgba(0, 0, 0, 0.3)',\r\n            'position:absolute',\r\n            'top:50%',\r\n            'left:50%',\r\n            'margin:-' + playSize / 2 + 'px'\r\n          ].join(';')\r\n    var playButtonIconStyles =\r\n      opts && opts.playButtonIconStyles\r\n        ? parseStyles(opts.playButtonIconStyles)\r\n        : [\r\n            'width: 0',\r\n            'height: 0',\r\n            'border-top: 14px solid transparent',\r\n            'border-bottom: 14px solid transparent',\r\n            'border-left: 14px solid rgba(0, 0, 0, 0.5)',\r\n            'position: absolute',\r\n            'left: 26px',\r\n            'top: 16px'\r\n          ].join(';')\r\n\r\n    cls ? con.setAttribute('class', el.getAttribute('class')) : null\r\n    id ? con.setAttribute('id', el.getAttribute('id')) : null\r\n    con.setAttribute(\r\n      'style',\r\n      'position:relative;cursor:pointer;background:none;border:none;padding:0;'\r\n    )\r\n    con.setAttribute('aria-hidden', 'true')\r\n\r\n    // creating play button\r\n    var play = d.createElement('DIV')\r\n    play.setAttribute('class', 'gifffer-play-button')\r\n    play.setAttribute('style', playButtonStyles)\r\n\r\n    var trngl = d.createElement('DIV')\r\n    trngl.setAttribute('style', playButtonIconStyles)\r\n    play.appendChild(trngl)\r\n\r\n    // create alt text if available\r\n    if (altText) {\r\n      alt = d.createElement('p')\r\n      alt.setAttribute('class', 'gifffer-alt')\r\n      alt.setAttribute(\r\n        'style',\r\n        'border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px;'\r\n      )\r\n      alt.innerText = altText + ', image'\r\n    }\r\n\r\n    // dom placement\r\n    con.appendChild(play)\r\n    el.parentNode.replaceChild(con, el)\r\n    altText ? con.parentNode.insertBefore(alt, con.nextSibling) : null\r\n    return { c: con, p: play }\r\n  }\r\n\r\n  function calculatePercentageDim(el, w, h, wOrig, hOrig) {\r\n    var parentDimW = el.parentNode.offsetWidth\r\n    var parentDimH = el.parentNode.offsetHeight\r\n    var ratio = wOrig / hOrig\r\n\r\n    if (w.toString().indexOf('%') > 0) {\r\n      w = parseInt(w.toString().replace('%', ''))\r\n      w = (w / 100) * parentDimW\r\n      h = w / ratio\r\n    } else if (h.toString().indexOf('%') > 0) {\r\n      h = parseInt(h.toString().replace('%', ''))\r\n      h = (h / 100) * parentDimW\r\n      w = h * ratio\r\n    }\r\n\r\n    return { w: w, h: h }\r\n  }\r\n\r\n  function process(el, gifs, options) {\r\n    var url,\r\n      con,\r\n      c,\r\n      w,\r\n      h,\r\n      duration,\r\n      play,\r\n      gif,\r\n      playing = false,\r\n      cc,\r\n      isC,\r\n      durationTimeout,\r\n      dims,\r\n      altText\r\n\r\n    url = el.getAttribute('data-gifffer')\r\n    w = el.getAttribute('data-gifffer-width')\r\n    h = el.getAttribute('data-gifffer-height')\r\n    duration = el.getAttribute('data-gifffer-duration')\r\n    altText = el.getAttribute('data-gifffer-alt')\r\n    el.style.display = 'block'\r\n\r\n    // creating the canvas\r\n    c = document.createElement('canvas')\r\n    isC = !!(c.getContext && c.getContext('2d'))\r\n    if (w && h && isC) cc = createContainer(w, h, el, altText, options)\r\n\r\n    // waiting for image load\r\n    el.onload = function() {\r\n      if (!isC) return\r\n\r\n      w = w || el.width\r\n      h = h || el.height\r\n\r\n      // creating the container\r\n      if (!cc) cc = createContainer(w, h, el, altText, options)\r\n      con = cc.c\r\n      play = cc.p\r\n      dims = calculatePercentageDim(con, w, h, el.width, el.height)\r\n\r\n      // add the container to the gif arraylist\r\n      gifs.push(con)\r\n\r\n      // listening for image click\r\n      con.addEventListener('click', function() {\r\n        clearTimeout(durationTimeout)\r\n        if (!playing) {\r\n          playing = true\r\n          gif = document.createElement('IMG')\r\n          gif.setAttribute('style', 'width:100%;height:100%;')\r\n          gif.setAttribute('data-uri', Math.floor(Math.random() * 100000) + 1)\r\n          setTimeout(function() {\r\n            gif.src = url\r\n          }, 0)\r\n          con.removeChild(play)\r\n          con.removeChild(c)\r\n          con.appendChild(gif)\r\n          if (parseInt(duration) > 0) {\r\n            durationTimeout = setTimeout(function() {\r\n              playing = false\r\n              con.appendChild(play)\r\n              con.removeChild(gif)\r\n              con.appendChild(c)\r\n              gif = null\r\n            }, duration)\r\n          }\r\n        } else {\r\n          playing = false\r\n          con.appendChild(play)\r\n          con.removeChild(gif)\r\n          con.appendChild(c)\r\n          gif = null\r\n        }\r\n      })\r\n\r\n      // canvas\r\n      c.width = dims.w\r\n      c.height = dims.h\r\n      c.getContext('2d').drawImage(el, 0, 0, dims.w, dims.h)\r\n      con.appendChild(c)\r\n\r\n      // setting the actual image size\r\n      con.setAttribute(\r\n        'style',\r\n        'position:relative;cursor:pointer;width:' +\r\n          dims.w +\r\n          'px;height:' +\r\n          dims.h +\r\n          'px;background:none;border:none;padding:0;'\r\n      )\r\n\r\n      c.style.width = '100%'\r\n      c.style.height = '100%'\r\n\r\n      if (w.toString().indexOf('%') > 0 && h.toString().indexOf('%') > 0) {\r\n        con.style.width = w\r\n        con.style.height = h\r\n      } else if (w.toString().indexOf('%') > 0) {\r\n        con.style.width = w\r\n        con.style.height = 'inherit'\r\n      } else if (h.toString().indexOf('%') > 0) {\r\n        con.style.width = 'inherit'\r\n        con.style.height = h\r\n      } else {\r\n        con.style.width = dims.w + 'px'\r\n        con.style.height = dims.h + 'px'\r\n      }\r\n    }\r\n    el.src = url\r\n  }\r\n\r\n  return Gifffer\r\n}\r\n\r\ninitGiffer();"],"file":"gifffer.js"}